{% extends "email/base.html" %}

{% block title %}{{ campaign.title }}{% endblock %}

{% block content %}
<div style="text-align: center; margin-bottom: 30px;">
    {% if campaign.hero_image %}
    <img src="{{ campaign.hero_image }}" alt="{{ campaign.title }}" 
         style="max-width: 100%; height: auto; border-radius: 8px;">
    {% endif %}
    
    <h1 style="color: {{ campaign.theme_color }}; margin: 20px 0;">
        {{ campaign.title }}
    </h1>
    
    {% if campaign.subtitle %}
    <p style="font-size: 1.2em; color: #666;">
        {{ campaign.subtitle }}
    </p>
    {% endif %}
</div>

{% if campaign.promotion_type == 'discount' %}
<div style="
    background-color: {{ campaign.theme_color }};
    color: white;
    padding: 30px;
    border-radius: 8px;
    text-align: center;
    margin-bottom: 30px;
">
    <h2 style="margin: 0; font-size: 2em;">
        {{ campaign.discount_amount }}{% if campaign.discount_type == 'percentage' %}%{% endif %} OFF
    </h2>
    <p style="margin: 10px 0 0 0;">
        Use code: <strong>{{ campaign.promo_code }}</strong>
    </p>
    {% if campaign.expiry_date %}
    <p style="margin: 10px 0 0 0; font-size: 0.9em;">
        Offer ends {{ campaign.expiry_date|date }}
    </p>
    {% endif %}
</div>
{% endif %}

{% if campaign.featured_products %}
<div style="margin-bottom: 30px;">
    <h3 style="text-align: center; margin-bottom: 20px;">Featured Products</h3>
    
    <div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 20px;">
        {% for product in campaign.featured_products %}
        <div style="
            flex: 0 1 calc(33.333% - 20px);
            min-width: 200px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        ">
            <img src="{{ product.image }}" alt="{{ product.name }}" 
                 style="width: 100%; height: 200px; object-fit: cover;">
            <div style="padding: 15px;">
                <h4 style="margin: 0 0 10px 0;">{{ product.name }}</h4>
                <div style="margin-bottom: 10px;">
                    {% if product.original_price %}
                    <span style="text-decoration: line-through; color: #666;">
                        ${{ product.original_price|format_currency }}
                    </span>
                    {% endif %}
                    <span style="color: {{ campaign.theme_color }}; font-weight: bold; font-size: 1.2em;">
                        ${{ product.sale_price|format_currency }}
                    </span>
                </div>
                <a href="{{ product.url }}" class="button" style="width: 100%; text-align: center;">
                    Shop Now
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

{% if campaign.benefits %}
<div style="margin-bottom: 30px;">
    <div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 20px;">
        {% for benefit in campaign.benefits %}
        <div style="
            flex: 1;
            min-width: 200px;
            text-align: center;
            padding: 20px;
        ">
            <i class="fas fa-{{ benefit.icon }}" style="
                font-size: 2em;
                color: {{ campaign.theme_color }};
                margin-bottom: 10px;
            "></i>
            <h4 style="margin: 0 0 10px 0;">{{ benefit.title }}</h4>
            <p style="margin: 0; color: #666;">{{ benefit.description }}</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<div style="text-align: center; margin-top: 30px;">
    <a href="{{ campaign.shop_url }}" class="button" style="
        font-size: 1.2em;
        padding: 15px 40px;
        background-color: {{ campaign.theme_color }};
    ">
        Shop Now
    </a>
</div>

{% if campaign.terms %}
<div style="margin-top: 30px; font-size: 0.8em; color: #666;">
    <h5>Terms & Conditions</h5>
    {{ campaign.terms|safe }}
</div>
{% endif %}

<div style="font-size: 12px; color: #666; margin-top: 30px; text-align: center;">
    <p>
        This email was sent to {{ recipient_email }}.<br>
        To update your email preferences or unsubscribe, 
        <a href="{{ preferences_url }}">click here</a>.
    </p>
</div>
{% endblock %} 