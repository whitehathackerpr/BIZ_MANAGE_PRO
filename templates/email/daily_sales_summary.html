{% extends "email/base.html" %}

{% block title %}Daily Sales Summary - {{ date|date }}{% endblock %}

{% block content %}
<h2>Daily Sales Summary</h2>
<p>Here's your daily sales summary for {{ date|date }}:</p>

<div style="background-color: #f8f9fa; padding: 20px; border-radius: 4px; margin: 20px 0;">
    <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
        <div style="text-align: center; flex: 1;">
            <h3 style="margin: 0; color: #2196f3;">${{ summary.total_revenue|format_currency }}</h3>
            <p style="margin: 5px 0 0 0; color: #666;">Total Revenue</p>
        </div>
        <div style="text-align: center; flex: 1;">
            <h3 style="margin: 0; color: #4caf50;">{{ summary.total_orders }}</h3>
            <p style="margin: 5px 0 0 0; color: #666;">Total Orders</p>
        </div>
        <div style="text-align: center; flex: 1;">
            <h3 style="margin: 0; color: #ff9800;">${{ summary.avg_order_value|format_currency }}</h3>
            <p style="margin: 5px 0 0 0; color: #666;">Avg Order Value</p>
        </div>
    </div>
    
    <div style="margin-top: 15px;">
        <p style="margin: 0;">
            <span style="color: {% if summary.revenue_change > 0 %}#4caf50{% else %}#f44336{% endif %};">
                <i class="fas fa-{% if summary.revenue_change > 0 %}arrow-up{% else %}arrow-down{% endif %}"></i>
                {{ summary.revenue_change|abs }}%
            </span>
            vs previous day
        </p>
    </div>
</div>

<h3>Top Selling Products</h3>
<table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
    <thead>
        <tr style="background-color: #f8f9fa;">
            <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Product</th>
            <th style="padding: 12px; text-align: center; border-bottom: 2px solid #dee2e6;">Units Sold</th>
            <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">Revenue</th>
        </tr>
    </thead>
    <tbody>
        {% for product in top_products %}
        <tr style="border-bottom: 1px solid #dee2e6;">
            <td style="padding: 12px;">{{ product.name }}</td>
            <td style="padding: 12px; text-align: center;">{{ product.units_sold }}</td>
            <td style="padding: 12px; text-align: right;">
                ${{ product.revenue|format_currency }}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>Sales by Channel</h3>
<table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
    <thead>
        <tr style="background-color: #f8f9fa;">
            <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Channel</th>
            <th style="padding: 12px; text-align: center; border-bottom: 2px solid #dee2e6;">Orders</th>
            <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">Revenue</th>
            <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">% of Total</th>
        </tr>
    </thead>
    <tbody>
        {% for channel in sales_by_channel %}
        <tr style="border-bottom: 1px solid #dee2e6;">
            <td style="padding: 12px;">{{ channel.name }}</td>
            <td style="padding: 12px; text-align: center;">{{ channel.orders }}</td>
            <td style="padding: 12px; text-align: right;">
                ${{ channel.revenue|format_currency }}
            </td>
            <td style="padding: 12px; text-align: right;">{{ channel.percentage }}%</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div style="background-color: #e3f2fd; padding: 15px; border-radius: 4px; margin-top: 20px;">
    <h4 style="margin-top: 0; color: #1976d2;">Notable Events</h4>
    <ul style="list-style: none; padding: 0; margin: 0;">
        {% for event in notable_events %}
        <li style="margin-bottom: 8px;">
            <i class="fas fa-{{ event.icon }}" style="color: {{ event.color }};"></i>
            {{ event.message }}
        </li>
        {% endfor %}
    </ul>
</div>

<p style="text-align: center; margin-top: 30px;">
    <a href="{{ dashboard_url }}" class="button">View Full Report</a>
</p>

<div style="font-size: 12px; color: #666; margin-top: 30px;">
    <p>
        This report was automatically generated on {{ generated_at|datetime }}.
        To modify your notification preferences, visit your 
        <a href="{{ settings_url }}">account settings</a>.
    </p>
</div>
{% endblock %} 